<main class="container indexpage">
  <div class="columns is-multiline is-mobile">

  <!-- Could refactor these 3 filters with a loop if time -->
    <div class="column is-one-quarter-desktop is-one-third-tablet is-one-half-mobile">
      <form action="/restaurants" method="GET">
        <div class="content">
          <h2 class="is-2">Select your search criteria:</h2>
          <h2 class="is-2">Location</h2>
          <% locations.forEach(location => { %>
            <div class="field">
              <label class="checkbox">
                <input type="checkbox" name="location" value="<%= location %>"
                <%if (typeof selectedlocation !== 'undefined' && selectedlocation.includes(location)) {%> checked <%}%> onchange="this.form.submit()">
                <%= location %>
              </label>
            </div>
          <% }) %>
          <h2 class="is-2">Cuisine</h2>
          <% cuisines.forEach(cuisine => { %>
            <div class="field">
              <label class="checkbox">
                <input type="checkbox" name="cuisine" value="<%= cuisine %>"
                <%if (typeof selectedcuisine !== 'undefined' &&
                selectedcuisine.includes(cuisine)) {%> checked <%}%> onchange="this.form.submit()">
                <%= cuisine %>
              </label>
            </div>
          <% }) %>
          <h2 class="is-2">Price ranges</h2>
          <% priceRanges.forEach(priceRange => { %>
            <div class="field">
              <label class="checkbox">
                <input type="checkbox" name="priceRange" value="<%= priceRange %>"
                <%if (typeof selectedpriceRange !== 'undefined' &&
                selectedpriceRange.includes(priceRange)) {%> checked <%}%> onchange="this.form.submit()">
                <%= priceRange %>
              </label>
            </div>
          <% }) %>
        </div>
      </form>
    </div>

    <div class="column column is-three-quarters-desktop is-two-thirds-tablet is-one-half-mobile">
      <div class="columns is-multiline is-mobile">
        <% restaurants.forEach(restaurant => { %>
          <div class="column is-one-third-desktop is-half-tablet is-full-mobile restaurantCard">
            <a href="/restaurants/<%= restaurant._id %>">
              <div class="card">
                <div class="card-image">
                  <figure class="image">
                    <div class="imgRestaurant" style="background: url(<%=restaurant.image%>)">
                    </div>
                  </figure>
                </div>
                <div class="card-content">
                  <h4 class="subtitle is-4"><%= restaurant.name %></h4>
                  <h6 class="subtitle is-6"><%= restaurant.location %></h6>
                  <h6 class="subtitle is-6">Reviews</h6>
                  <h6 class="subtitle is-6"><%= restaurant.priceRange %></h6>
                  <h6 class="subtitle is-6"><%= restaurant.cuisine %></h6>
                </div>
              </div>
            </a>
          </div>
        <% }) %>
      </div>
    </div>
  </div>
</main>
